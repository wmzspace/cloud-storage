import{d as S,r as c,o as T,u as M,j as A,c as N,b as m,e as s,k,f as n,w as a,g as d,l as p,i as l,F as E,h as L,t as u}from"./index-n_4Nh0Yf.js";const R={class:"p-6"},G={class:"flex items-center justify-between mb-6"},H={class:"flex items-center space-x-3"},J={class:"flex flex-col h-full"},K={class:"flex items-start justify-between mb-3"},P={class:"text-5xl"},Q={class:"font-medium text-slate-800 mb-1 truncate"},W={class:"text-sm text-slate-500 mb-4 flex-grow"},X={class:"flex items-center justify-between"},Y={class:"flex items-center"},Z={class:"text-2xl mr-3"},at=S({__name:"FilesView",setup(tt){const v=c("grid"),g=c([]),x=c(!1),_=c(null),y=c(void 0),w=M();async function f(){const o=await p.list(y.value);g.value=o.data}function b(o){return o==="已处理"?"arcoblue":o==="处理中"?"orange":"red"}function C(o){window.open(p.downloadUrl(o),"_blank")}async function h(o){await p.remove(o),await f()}async function z(o){const t=p.shareUrl(o);await navigator.clipboard.writeText(t)}async function j(o){const i=o.target.files?.[0];if(i)try{x.value=!0,await p.upload(i),await f()}finally{x.value=!1,_.value&&(_.value.value="")}}return T(()=>{y.value=typeof w.query.q=="string"?w.query.q:void 0,f()}),A(()=>w.query.q,o=>{y.value=typeof o=="string"?o:void 0,f()}),(o,t)=>{const i=d("a-button"),q=d("a-radio"),B=d("a-radio-group"),V=d("a-tag"),$=d("a-popconfirm"),I=d("a-space"),O=d("a-card"),U=d("a-grid-item"),D=d("a-grid"),F=d("a-table");return m(),N("div",R,[s("div",G,[t[5]||(t[5]=s("h2",{class:"text-2xl font-bold text-slate-800"},"我的文件",-1)),s("div",H,[s("input",{ref_key:"fileInput",ref:_,type:"file",class:"hidden",onChange:j},null,544),n(i,{type:"primary",loading:x.value,onClick:t[0]||(t[0]=e=>_.value?.click())},{default:a(()=>[...t[2]||(t[2]=[l("上传文件",-1)])]),_:1},8,["loading"]),n(B,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),type:"button"},{default:a(()=>[n(q,{value:"grid"},{default:a(()=>[...t[3]||(t[3]=[l("网格",-1)])]),_:1}),n(q,{value:"list"},{default:a(()=>[...t[4]||(t[4]=[l("列表",-1)])]),_:1})]),_:1},8,["modelValue"])])]),v.value==="grid"?(m(),k(D,{key:0,cols:24,"col-gap":24,"row-gap":24},{default:a(()=>[(m(!0),N(E,null,L(g.value,e=>(m(),k(U,{key:e.id,span:6},{default:a(()=>[n(O,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-all group h-full"},{default:a(()=>[s("div",J,[s("div",K,[s("span",P,u(e.thumbnail),1)]),s("h3",Q,u(e.name),1),s("p",W,u(e.size)+" • "+u(e.date),1),s("div",X,[n(V,{color:b(e.status),size:"small"},{default:a(()=>[l(u(e.status),1)]),_:2},1032,["color"]),n(I,{class:"opacity-0 group-hover:opacity-100 transition-opacity"},{default:a(()=>[n(i,{size:"mini",type:"text",onClick:r=>C(e.name)},{default:a(()=>[...t[6]||(t[6]=[l("下载",-1)])]),_:1},8,["onClick"]),n(i,{size:"mini",type:"text",onClick:r=>z(e.name)},{default:a(()=>[...t[7]||(t[7]=[l("分享",-1)])]),_:1},8,["onClick"]),n($,{content:"确定要删除这个文件吗？",onOk:r=>h(e.name)},{default:a(()=>[n(i,{size:"mini",type:"text",status:"danger"},{default:a(()=>[...t[8]||(t[8]=[l("删除",-1)])]),_:1})]),_:1},8,["onOk"])]),_:2},1024)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(m(),k(F,{key:1,columns:[{title:"名称",dataIndex:"name",slotName:"name",width:400},{title:"大小",dataIndex:"size"},{title:"修改时间",dataIndex:"date"},{title:"状态",dataIndex:"status",slotName:"status"},{title:"操作",slotName:"actions",align:"center"}],data:g.value,pagination:!1,"row-key":"id",class:"shadow-sm"},{name:a(({record:e})=>[s("div",Y,[s("span",Z,u(e.thumbnail),1),s("span",null,u(e.name),1)])]),status:a(({record:e})=>[n(V,{color:b(e.status)},{default:a(()=>[l(u(e.status),1)]),_:2},1032,["color"])]),actions:a(({record:e})=>[n(I,null,{default:a(()=>[n(i,{size:"mini",type:"text",onClick:r=>C(e.name)},{default:a(()=>[...t[9]||(t[9]=[l("下载",-1)])]),_:1},8,["onClick"]),n(i,{size:"mini",type:"text",onClick:r=>z(e.name)},{default:a(()=>[...t[10]||(t[10]=[l("分享",-1)])]),_:1},8,["onClick"]),n($,{content:"确定要删除这个文件吗？",onOk:r=>h(e.name)},{default:a(()=>[n(i,{size:"mini",type:"text",status:"danger"},{default:a(()=>[...t[11]||(t[11]=[l("删除",-1)])]),_:1})]),_:1},8,["onOk"])]),_:2},1024)]),_:1},8,["data"]))])}}});export{at as default};
