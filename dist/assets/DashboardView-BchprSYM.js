import{d as V,a as C,r as p,o as N,c as u,b as _,e as a,f as e,w as t,g as h,F as y,h as B,t as n,i as F}from"./index-n_4Nh0Yf.js";const j={class:"p-6"},A={class:"space-y-4"},D={class:"flex items-center"},L={class:"text-2xl mr-3"},M={class:"space-y-3"},P={class:"flex items-center"},T={class:"text-2xl mr-3"},$={class:"text-sm font-medium text-gray-800"},z={class:"text-xs text-gray-500"},E={class:"text-xs text-slate-500"},K=V({__name:"DashboardView",setup(G){const m=C.create({baseURL:"http://localhost:3001/api"}),c=p({totalFiles:0,imageFiles:0,videoFiles:0,sharedFiles:0}),f=p([]),g=p([]),v=p({usedBytes:0,capacityBytes:10*1024*1024*1024,usedPercent:0}),x=r=>{if(!r)return"0 B";const d=["B","KB","MB","GB","TB"];let l=0,s=r;for(;s>=1024&&l<d.length-1;)s/=1024,l++;return`${s.toFixed(s>=10||l===0?0:1)} ${d[l]}`};async function k(){const[r,d,l,s]=await Promise.all([m.get("/stats/dashboard"),m.get("/stats/ai"),m.get("/files/recent",{params:{limit:4}}),m.get("/stats/storage")]);c.value=r.data,f.value=d.data,g.value=l.data,v.value=s.data}return N(k),(r,d)=>{const l=h("a-statistic"),s=h("a-card"),i=h("a-grid-item"),w=h("a-grid"),b=h("a-tag");return _(),u("div",j,[d[0]||(d[0]=a("h2",{class:"text-2xl font-bold text-slate-800 mb-6"},"仪表盘",-1)),e(w,{cols:24,"col-gap":24,"row-gap":24,class:"mb-8"},{default:t(()=>[e(i,{span:6},{default:t(()=>[e(s,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow"},{default:t(()=>[e(l,{title:"总文件数",value:c.value.totalFiles},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(s,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow"},{default:t(()=>[e(l,{title:"图片文件",value:c.value.imageFiles},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(s,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow"},{default:t(()=>[e(l,{title:"视频文件",value:c.value.videoFiles},null,8,["value"])]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(s,{bordered:!1,class:"shadow-sm hover:shadow-lg transition-shadow"},{default:t(()=>[e(l,{title:"共享文件",value:c.value.sharedFiles},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(w,{cols:2,"col-gap":16,"row-gap":16},{default:t(()=>[e(i,null,{default:t(()=>[e(s,{title:"AI处理统计"},{default:t(()=>[a("div",A,[(_(!0),u(y,null,B(f.value,(o,R)=>(_(),u("div",{key:R,class:"flex items-center justify-between"},[a("div",D,[a("span",L,n(o.icon),1),a("span",null,n(o.name),1)]),e(b,{color:"blue"},{default:t(()=>[F(n(o.count),1)]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,{title:"最近上传"},{extra:t(()=>[a("div",E,"存储："+n(x(v.value.usedBytes))+" / "+n(x(v.value.capacityBytes)),1)]),default:t(()=>[a("div",M,[(_(!0),u(y,null,B(g.value,o=>(_(),u("div",{key:o.id,class:"flex items-center justify-between"},[a("div",P,[a("span",T,n(o.thumbnail),1),a("div",null,[a("p",$,n(o.name),1),a("p",z,n(o.size)+" • "+n(o.date),1)])]),e(b,{color:"arcoblue"},{default:t(()=>[F(n(o.status),1)]),_:2},1024)]))),128))])]),_:1})]),_:1})]),_:1})])}}});export{K as default};
